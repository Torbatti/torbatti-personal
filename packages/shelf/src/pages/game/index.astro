---
import ShelfLayout from "../_ShelfLayout.astro";

// ! THIS IS NOT A MISTAKE
// ! NO POCKET BASE SERVER IN PROD
import pb from "libs/pocketbase";

const adminData = await pb.admins.authWithPassword('admin@example.com', 'admin@example.com');
const records = await pb.collection('games').getFullList({sort: 'game_title',});
// console.log(records);
---
<ShelfLayout title="چاه بازی" description="" author="" key_words="" child_url="game">

  <div id="posts" class="flex flex-wrap high-gap">
    {records.map((post)=>(
      <div id="post" class="tc2 flex flex-col jcontent-center aitems-center">
        <p class="tc5">{post.game_title}</p>

        <div id="post-genre">
          <p>{post.game_genre} </p>
        </div>
        <div id="post-details" class="flex low-gap">
          <p>{post.release_date} </p>
          {
            (post.game_state === "plan") 
            ?<p>{post.game_state} </p> 
            :<p>{post.game_state} </p><p>{post.game_rate}/10</p>
          }
        </div>
      </div>
    ))}
  </div>
  <!-- <div class="flex mid-gap">
    <p> {post.game_publisher} </p>
    <p> {post.game_developer} </p>
  </div> -->
  <!-- <div id="post-details" class="flex low-gap">
    <p>{post.game_state} </p>
    <p>{post.play_time} </p>
    <p>{post.game_rate}/10</p>
    <p>{post.release_date} </p>
  </div> -->

</ShelfLayout>

<style>
  #post{font-weight: bold;font-size:small;}
  #posts{
    direction:ltr;
  }
  @media(max-width:768px){
    #posts{
      flex-direction:column;
      gap:1rem;
      align-items:end;
    }
    #posts #post{
      align-items:end;
    }
  }

</style>